---

title: "Fresh Schedules: Complete User Journey (Sign-In â†’ Onboarding â†’ App)"
description: "Visual user journey from sign-in through onboarding and app usage."
keywords:
  - visuals
  - golden-path
  - journey
  - onboarding
category: "report"
status: "active"
audience:
  - developers
  - designers
related-docs:
  - README.md
  - ../INDEX.md
createdAt: "2026-01-31T07:19:03Z"
lastUpdated: "2026-01-31T07:19:03Z"

---

# Fresh Schedules: Complete User Journey (Sign-In â†’ Onboarding â†’ App)

> **Generated**: December 17, 2025\
> **Status**: Verified against actual source code\
> **Grounded in**: `apps/web/app/(auth)/`, `apps/web/app/onboarding/`, `apps/web/app/api/`

---

## Visual Overview

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           FRESH SCHEDULES USER JOURNEY                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   /login    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                      â”‚                      â”‚
                    â–¼                      â–¼                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Magic Link   â”‚     â”‚    Google     â”‚      â”‚  Email Link   â”‚
            â”‚  (send email) â”‚     â”‚    Popup      â”‚      â”‚  (complete)   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                     â”‚                      â”‚
                    â”‚                     â–¼                      â”‚
                    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
                    â”‚         â”‚  establishServerSessionâ”‚         â”‚
                    â”‚         â”‚  POST /api/session     â”‚         â”‚
                    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                    â”‚                     â”‚                      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
                               â”‚                                 â”‚
                               â–¼                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
                    â”‚   /auth/callback      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚   (handles redirects) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Session Cookie Set   â”‚
                    â”‚  HttpOnly, Secure     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  proxy.ts middleware  â”‚
                    â”‚  Check: has orgId?    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                                       â”‚
            â–¼                                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   HAS ORG     â”‚                      â”‚   NO ORG      â”‚
    â”‚   â†’ /app      â”‚                      â”‚   â†’ /onboard  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â–¼
                                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                                    â•‘   ONBOARDING WIZARD       â•‘
                                    â•‘   (See detailed flow)     â•‘
                                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Phase 1: Authentication (Actual Code)

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           AUTHENTICATION PHASE                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  USER ARRIVES AT /login                                                          â”‚
â”‚  File: apps/web/app/(auth)/login/page.tsx                                        â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        SIGN-IN OPTIONS                                    â”‚   â”‚
â”‚  â”‚                                                                           â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚   â”‚   ğŸ“§ Email      â”‚    â”‚   ğŸ” Google     â”‚    â”‚   ğŸ“± Email Link â”‚      â”‚   â”‚
â”‚  â”‚   â”‚   Magic Link    â”‚    â”‚   OAuth Popup   â”‚    â”‚   (from inbox)  â”‚      â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â”‚            â”‚                      â”‚                      â”‚               â”‚   â”‚
â”‚  â”‚            â–¼                      â–¼                      â–¼               â”‚   â”‚
â”‚  â”‚   sendEmailLinkRobust()  signInWithPopup()     isSignInWithEmailLink()   â”‚   â”‚
â”‚  â”‚   (stores pending email)  (returns cred)       (checks URL params)       â”‚   â”‚
â”‚  â”‚            â”‚                      â”‚                      â”‚               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                      â”‚                      â”‚                   â”‚
â”‚               â”‚                      â–¼                      â”‚                   â”‚
â”‚               â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                   â”‚
â”‚               â”‚         â”‚ establishServerSession â”‚          â”‚                   â”‚
â”‚               â”‚         â”‚ POST /api/session      â”‚          â”‚                   â”‚
â”‚               â”‚         â”‚ { idToken: "..." }     â”‚          â”‚                   â”‚
â”‚               â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                   â”‚
â”‚               â”‚                    â”‚                        â”‚                   â”‚
â”‚               â”‚                    â–¼                        â”‚                   â”‚
â”‚               â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                   â”‚
â”‚               â”‚         â”‚ createSessionCookie()  â”‚          â”‚                   â”‚
â”‚               â”‚         â”‚ 5-day expiry           â”‚          â”‚                   â”‚
â”‚               â”‚         â”‚ HttpOnly, Secure, Lax  â”‚          â”‚                   â”‚
â”‚               â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                   â”‚
â”‚               â”‚                    â”‚                        â”‚                   â”‚
â”‚               â”‚                    â–¼                        â”‚                   â”‚
â”‚               â”‚              router.replace("/")            â”‚                   â”‚
â”‚               â”‚                    â”‚                        â”‚                   â”‚
â”‚               â–¼                    â”‚                        â–¼                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚    â”‚ Check inbox,    â”‚             â”‚             â”‚ /auth/callback  â”‚            â”‚
â”‚    â”‚ click link      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ completes flow  â”‚            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                    â”‚                      â”‚                     â”‚
â”‚                                    â–¼                      â–¼                     â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚                         â”‚        SESSION ESTABLISHED           â”‚                â”‚
â”‚                         â”‚   Cookie: session=<jwt>              â”‚                â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                            â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚
                                             â–¼
```

---

## Phase 2: Org Check Gate (Middleware)

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ORG CHECK GATE                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  File: apps/web/proxy.ts                                                         â”‚
â”‚                                                                                  â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                          â”‚  Any page request   â”‚                                â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                     â”‚                                           â”‚
â”‚                                     â–¼                                           â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                          â”‚ Is public route?    â”‚                                â”‚
â”‚                          â”‚ /onboarding/*       â”‚                                â”‚
â”‚                          â”‚ /signin/*           â”‚                                â”‚
â”‚                          â”‚ /api/*              â”‚                                â”‚
â”‚                          â”‚ /_next/*            â”‚                                â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                     â”‚                                           â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                     â”‚ YES                     NO    â”‚                           â”‚
â”‚                     â–¼                               â–¼                           â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚          â”‚  NextResponse   â”‚             â”‚ Check cookie:   â”‚                    â”‚
â”‚          â”‚  .next()        â”‚             â”‚ orgId exists?   â”‚                    â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                   â”‚                             â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                                    â”‚ YES                    NO   â”‚              â”‚
â”‚                                    â–¼                             â–¼              â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚                         â”‚  Allow access   â”‚           â”‚ Redirect to     â”‚       â”‚
â”‚                         â”‚  to protected   â”‚           â”‚ /onboarding     â”‚       â”‚
â”‚                         â”‚  routes         â”‚           â”‚                 â”‚       â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                 â”‚
                                                                 â–¼
```

---

## Phase 3: Onboarding Wizard (Complete Flow)

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ONBOARDING WIZARD                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  Layout: apps/web/app/onboarding/layout.tsx                                      â”‚
â”‚  Context: OnboardingWizardProvider (stores intent, formToken, networkId, etc.)   â”‚
â”‚                                                                                  â”‚
â”‚                                                                                  â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  STEP 1: PROFILE                                                          â•‘  â”‚
â”‚  â•‘  File: /onboarding/profile/page.tsx                                       â•‘  â”‚
â”‚  â•‘  API: POST /api/onboarding/profile                                        â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘  â”‚
â”‚  â•‘  â”‚  COLLECT:                                                           â”‚  â•‘  â”‚
â”‚  â•‘  â”‚  â€¢ Full name                                                        â”‚  â•‘  â”‚
â”‚  â•‘  â”‚  â€¢ Preferred name                                                   â”‚  â•‘  â”‚
â”‚  â•‘  â”‚  â€¢ Phone                                                            â”‚  â•‘  â”‚
â”‚  â•‘  â”‚  â€¢ Time zone                                                        â”‚  â•‘  â”‚
â”‚  â•‘  â”‚  â€¢ Self-declared role (owner/founder/director/manager/etc)          â”‚  â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘                                 â”‚                                         â•‘  â”‚
â”‚  â•‘                                 â–¼                                         â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  STEP 2: INTENT SELECTION                                                 â•‘  â”‚
â”‚  â•‘  File: /onboarding/intent/page.tsx                                        â•‘  â”‚
â”‚  â•‘  API: POST /api/onboarding/verify-eligibility                             â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘  â”‚
â”‚  â•‘  â”‚  "What are you trying to do?"                                       â”‚  â•‘  â”‚
â”‚  â•‘  â”‚                                                                     â”‚  â•‘  â”‚
â”‚  â•‘  â”‚  â—‹ I manage a single location or local team     â†’ "create_org"     â”‚  â•‘  â”‚
â”‚  â•‘  â”‚  â—‹ I'm corporate/HQ setting up a network        â†’ "create_corporate"â”‚  â•‘  â”‚
â”‚  â•‘  â”‚  â—‹ I'm joining a company that already uses this â†’ "join_existing"  â”‚  â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘                                 â”‚                                         â•‘  â”‚
â”‚  â•‘                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â•‘  â”‚
â”‚  â•‘                    â”‚            â”‚            â”‚                            â•‘  â”‚
â”‚  â•‘              BLOCKED       NOT ALLOWED   ALLOWED                          â•‘  â”‚
â”‚  â•‘                    â”‚            â”‚            â”‚                            â•‘  â”‚
â”‚  â•‘                    â–¼            â–¼            â–¼                            â•‘  â”‚
â”‚  â•‘           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â•‘  â”‚
â”‚  â•‘           â”‚ email_not_  â”‚ â”‚ role_   â”‚ â”‚                     â”‚             â•‘  â”‚
â”‚  â•‘           â”‚ verified    â”‚ â”‚ not_    â”‚ â”‚   intent check...   â”‚             â•‘  â”‚
â”‚  â•‘           â”‚ â†’ /blocked/ â”‚ â”‚ allowed â”‚ â”‚                     â”‚             â•‘  â”‚
â”‚  â•‘           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â•‘  â”‚
â”‚  â•‘                                                  â”‚                        â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                     â”‚                           â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                     â”‚                               â”‚                       â”‚   â”‚
â”‚                     â–¼                               â–¼                       â–¼   â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚          â”‚   "join_existing"   â”‚        â”‚  "create_org" OR "create_corporate" â”‚ â”‚
â”‚          â”‚                     â”‚        â”‚                                     â”‚ â”‚
â”‚          â”‚  /onboarding/join   â”‚        â”‚   /onboarding/admin-responsibility  â”‚ â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â”‚                                     â”‚                     â”‚
â”‚                     â”‚                                     â–¼                     â”‚
â”‚                     â”‚                   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚                     â”‚                   â•‘  STEP 3: ADMIN RESPONSIBILITY       â•‘ â”‚
â”‚                     â”‚                   â•‘  File: /admin-responsibility/page   â•‘ â”‚
â”‚                     â”‚                   â•‘  API: POST /api/onboarding/admin-formâ•‘ â”‚
â”‚                     â”‚                   â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚                     â”‚                   â•‘                                     â•‘ â”‚
â”‚                     â”‚                   â•‘  COLLECT:                           â•‘ â”‚
â”‚                     â”‚                   â•‘  â€¢ Legal entity name                â•‘ â”‚
â”‚                     â”‚                   â•‘  â€¢ Tax ID                           â•‘ â”‚
â”‚                     â”‚                   â•‘  â€¢ Country code                     â•‘ â”‚
â”‚                     â”‚                   â•‘  â€¢ Business email/phone             â•‘ â”‚
â”‚                     â”‚                   â•‘  â€¢ Liability acknowledgment â˜‘       â•‘ â”‚
â”‚                     â”‚                   â•‘  â€¢ Terms accepted â˜‘                 â•‘ â”‚
â”‚                     â”‚                   â•‘  â€¢ Privacy accepted â˜‘               â•‘ â”‚
â”‚                     â”‚                   â•‘  â€¢ Admin signature                  â•‘ â”‚
â”‚                     â”‚                   â•‘                                     â•‘ â”‚
â”‚                     â”‚                   â•‘  RETURNS: formToken                 â•‘ â”‚
â”‚                     â”‚                   â•‘                                     â•‘ â”‚
â”‚                     â”‚                   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                     â”‚                                       â”‚                   â”‚
â”‚                     â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                     â”‚                   â”‚                                   â”‚   â”‚
â”‚                     â”‚                   â–¼                                   â–¼   â”‚
â”‚                     â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚       â”‚ "create_corporate"  â”‚         â”‚    "create_org"     â”‚
â”‚                     â”‚       â”‚                     â”‚         â”‚                     â”‚
â”‚                     â”‚       â”‚ /create-network-    â”‚         â”‚ /create-network-org â”‚
â”‚                     â”‚       â”‚ corporate           â”‚         â”‚                     â”‚
â”‚                     â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                     â”‚                  â”‚                               â”‚          â”‚
â”‚                     â”‚                  â–¼                               â–¼          â”‚
â”‚                     â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚                     â”‚  â•‘ STEP 4A: CORPORATE NET  â•‘   â•‘ STEP 4B: ORG NETWORK    â•‘  â”‚
â”‚                     â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£   â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚                     â”‚  â•‘ COLLECT:                â•‘   â•‘ COLLECT:                â•‘  â”‚
â”‚                     â”‚  â•‘ â€¢ Corporate entity name â•‘   â•‘ â€¢ Organization name     â•‘  â”‚
â”‚                     â”‚  â•‘ â€¢ Brand name            â•‘   â•‘ â€¢ Primary venue name    â•‘  â”‚
â”‚                     â”‚  â•‘ â€¢ HQ City/State         â•‘   â•‘ â€¢ City/State            â•‘  â”‚
â”‚                     â”‚  â•‘ â€¢ # of locations        â•‘   â•‘                         â•‘  â”‚
â”‚                     â”‚  â•‘                         â•‘   â•‘                         â•‘  â”‚
â”‚                     â”‚  â•‘ API: POST /api/onboard  â•‘   â•‘ API: POST /api/onboard  â•‘  â”‚
â”‚                     â”‚  â•‘ /create-network-corp    â•‘   â•‘ /create-network-org     â•‘  â”‚
â”‚                     â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â•šâ•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                     â”‚              â”‚                             â”‚               â”‚
â”‚                     â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                     â”‚                             â”‚                              â”‚
â”‚                     â”‚                             â–¼                              â”‚
â”‚                     â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚                     â”‚               â”‚   POST /api/onboarding/     â”‚              â”‚
â”‚                     â”‚               â”‚   activate-network          â”‚              â”‚
â”‚                     â”‚               â”‚   (sets status = "active")  â”‚              â”‚
â”‚                     â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                     â”‚                              â”‚                             â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                    â”‚
â”‚                                                    â–¼
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘  STEP 5: COMPLETION (block-4)                                             â•‘  â”‚
â”‚  â•‘  File: /onboarding/block-4/page.tsx                                       â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  DISPLAYS:                                                                â•‘  â”‚
â”‚  â•‘  â€¢ "You're in."                                                           â•‘  â”‚
â”‚  â•‘  â€¢ Network ID (if created)                                                â•‘  â”‚
â”‚  â•‘  â€¢ Org ID (if created)                                                    â•‘  â”‚
â”‚  â•‘  â€¢ Venue ID (if created)                                                  â•‘  â”‚
â”‚  â•‘  â€¢ Corporate ID (if corporate path)                                       â•‘  â”‚
â”‚  â•‘  â€¢ Joined Role (if join path)                                             â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â•‘  â”‚
â”‚  â•‘  â”‚   "Go to the app"   â”€â”€â”€â–¶â”‚  router.push("/")                            â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”´ GAPS IDENTIFIED IN CURRENT IMPLEMENTATION

### Gap 1: Frontend pages don't call their APIs

| Page                                            | Expected API Call                               | Actual Behavior                                                                              |
| ----------------------------------------------- | ----------------------------------------------- | -------------------------------------------------------------------------------------------- |
| `/onboarding/create-network-org/page.tsx`       | `POST /api/onboarding/create-network-org`       | **Comment only**: "Real implementation would POST..." then `nav.push("/onboarding/block-4")` |
| `/onboarding/create-network-corporate/page.tsx` | `POST /api/onboarding/create-network-corporate` | **Comment only**: "Real implementation would POST..." then `nav.push("/onboarding/block-4")` |
| `/onboarding/join/page.tsx`                     | `POST /api/onboarding/join-with-token`          | **Comment only**: "Real implementation would POST..." then `nav.push("/onboarding/block-4")` |

**Impact**: The API routes exist and work, but the frontend bypasses them entirely.

---

### Gap 2: Missing orgId cookie set

| Where Expected                             | What Should Happen                             | What Actually Happens                  |
| ------------------------------------------ | ---------------------------------------------- | -------------------------------------- |
| After network creation                     | Set `orgId` cookie so `proxy.ts` allows access | **Not implemented** - cookie never set |
| `/api/onboarding/create-network-org`       | Should `response.cookies.set("orgId", ...)`    | Returns mock data only                 |
| `/api/onboarding/create-network-corporate` | Should `response.cookies.set("orgId", ...)`    | Returns mock data only                 |

**Impact**: Users complete onboarding but `proxy.ts` will redirect them back to `/onboarding`
because `orgId` cookie is never set.

---

### Gap 3: No profile persistence

| Route                          | Expected                          | Actual                                                 |
| ------------------------------ | --------------------------------- | ------------------------------------------------------ |
| `POST /api/onboarding/profile` | Write to Firestore `/users/{uid}` | **Not found** - route may not exist or doesn't persist |

**Impact**: User profile data collected but never saved.

---

### Gap 4: API routes return mock data (no Firestore writes)

| Route                                      | Returns                                          | Actually Writes to Firestore?           |
| ------------------------------------------ | ------------------------------------------------ | --------------------------------------- |
| `/api/onboarding/create-network-org`       | `{ id, name, type, ownerId, createdAt, status }` | âŒ **No** - mock data only              |
| `/api/onboarding/create-network-corporate` | `{ id, type, corporateName, brandName, ... }`    | âŒ **No** - mock data only              |
| `/api/onboarding/activate-network`         | `{ ok, networkId, status }`                      | âœ… **Yes** - writes to `/networks/{id}` |
| `/api/onboarding/admin-form`               | `{ formToken }`                                  | **Unknown** - needs verification        |

---

### Gap 5: activate-network never called

| Expected Flow                                  | Actual Flow                            |
| ---------------------------------------------- | -------------------------------------- |
| create-network-\* â†’ activate-network â†’ block-4 | create-network-\* â†’ **skip** â†’ block-4 |

**Impact**: Networks created but never activated.

---

## ğŸ“‹ Recommended Fixes

```text
Priority 1 (Critical - Flow Broken):
â”œâ”€â”€ Wire frontend pages to call their API routes
â”œâ”€â”€ Set orgId cookie after successful network creation
â””â”€â”€ Ensure activate-network is called before completion

Priority 2 (Data Integrity):
â”œâ”€â”€ Implement actual Firestore writes in create-network-* routes
â”œâ”€â”€ Create/verify POST /api/onboarding/profile route
â””â”€â”€ Persist admin-form data

Priority 3 (Polish):
â”œâ”€â”€ Add loading states during API calls
â”œâ”€â”€ Add error handling for failed API calls
â””â”€â”€ Add retry logic for network failures
```

---

## API Route Summary

| Route                                      | Method | Auth          | Input Schema                      | Writes to Firestore |
| ------------------------------------------ | ------ | ------------- | --------------------------------- | ------------------- |
| `/api/session`                             | POST   | Public        | `CreateSessionSchema`             | N/A (cookie only)   |
| `/api/session`                             | DELETE | Public        | None                              | N/A (cookie only)   |
| `/api/onboarding/verify-eligibility`       | POST   | Authenticated | None                              | âŒ No               |
| `/api/onboarding/profile`                  | POST   | Authenticated | `ProfileSchema`?                  | â“ Unknown          |
| `/api/onboarding/admin-form`               | POST   | Authenticated | `AdminFormSchema`?                | â“ Unknown          |
| `/api/onboarding/create-network-org`       | POST   | Authenticated | `CreateNetworkSchema`             | âŒ No (mock)        |
| `/api/onboarding/create-network-corporate` | POST   | Authenticated | `CreateCorporateOnboardingSchema` | âŒ No (mock)        |
| `/api/onboarding/activate-network`         | POST   | Authenticated | `ActivateNetworkSchema`           | âœ… Yes              |
| `/api/onboarding/join-with-token`          | POST   | Authenticated | `JoinWithTokenSchema`?            | â“ Unknown          |

---

## Related Files

| Category           | Path                                                          |
| ------------------ | ------------------------------------------------------------- |
| Auth Helpers       | `apps/web/src/lib/auth-helpers.ts`                            |
| Firebase Client    | `apps/web/app/lib/firebaseClient.ts`                          |
| Firebase Admin     | `apps/web/lib/firebase-admin.ts`                              |
| Proxy Middleware   | `apps/web/proxy.ts`                                           |
| Onboarding Context | `apps/web/app/onboarding/_wizard/OnboardingWizardContext.tsx` |
| Onboarding Types   | `packages/types/src/onboarding.ts`                            |

---

## Schedule & Shift Flow (Actual Code)

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SCHEDULE & SHIFT MANAGEMENT                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  PREREQUISITES:                                                                  â”‚
â”‚  â€¢ User authenticated (session cookie)                                          â”‚
â”‚  â€¢ User has org membership with scheduler+ role                                  â”‚
â”‚  â€¢ orgId available in context                                                   â”‚
â”‚                                                                                  â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘                         SCHEDULES CRUD                                    â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  GET /api/schedules?orgId=xxx&limit=20&offset=0                           â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: Org member (any role)                                          â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Rate: 100 req/min                                                    â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Query: organizations/{orgId}/schedules                               â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Order: createdAt DESC                                                â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { data: ScheduleDoc[], limit, offset }                      â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  POST /api/schedules                                                      â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: scheduler+ role                                                â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Rate: 50 req/min                                                     â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Input: CreateScheduleSchema { name, startDate, endDate }             â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Writes: âœ… organizations/{orgId}/schedules/{id}                      â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { success: true, schedule }                                 â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  GET /api/schedules/[id]                                                  â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: Org member (any role)                                          â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Writes: âŒ Mock data only                                            â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { id, orgId, name, status, ... }                            â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  PATCH /api/schedules/[id]                                                â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: manager+ role                                                  â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Input: UpdateScheduleSchema                                          â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Writes: âŒ Mock data only                                            â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { id, ...updated, updatedBy, updatedAt }                    â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  DELETE /api/schedules/[id]                                               â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: manager+ role                                                  â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Writes: âŒ Mock data only                                            â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { deleted: true, id }                                       â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                  â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚                                                                                  â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘                           SHIFTS CRUD                                     â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  GET /api/shifts?orgId=xxx                                                â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: Org member (any role)                                          â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Writes: âŒ Mock data only                                            â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { shifts: [...], total }                                    â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  POST /api/shifts                                                         â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: manager+ role                                                  â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Input: CreateShiftSchema (validated by SDK)                          â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Writes: âŒ Mock data only                                            â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { id, orgId, ...shift, createdBy, createdAt }               â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  GET /api/shifts/[id]                                                     â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: Org member (any role)                                          â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Writes: âŒ Mock data only                                            â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { id, name, orgId, startTime, endTime }                     â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  PATCH /api/shifts/[id]                                                   â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: manager+ role                                                  â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Input: UpdateShiftSchema (validated by SDK)                          â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Writes: âŒ Mock data only                                            â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { id, ...updated, updatedBy }                               â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  DELETE /api/shifts/[id]                                                  â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: manager+ role                                                  â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Writes: âŒ Mock data only                                            â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { deleted: true, id }                                       â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                  â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚                                                                                  â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘                         PUBLISH FLOW                                      â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  POST /api/publish                                                        â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: manager+ role                                                  â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Input: { scheduleId, publishAt?, notifyUsers, channels[] }           â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Writes: âŒ Mock only (no actual state change)                        â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { success, scheduleId, publishedBy, publishedAt, ... }      â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                  â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘                         POSITIONS CRUD                                    â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  GET /api/positions?orgId=xxx                                             â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: Org member (any role)                                          â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Writes: âŒ Mock data only                                            â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { positions: [...], total }                                 â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•‘  POST /api/positions                                                      â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Auth: manager+ role                                                  â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Input: CreatePositionSchema (validated by SDK)                       â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Writes: âŒ Mock data only                                            â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Returns: { id, orgId, ...position, createdBy, createdAt }            â•‘  â”‚
â”‚  â•‘                                                                           â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Schedule Document Structure

```typescript
interface ScheduleDoc {
  id: string; // Auto-generated
  orgId: string; // From context.org.orgId
  name: string; // User input
  startDate: Timestamp; // Firebase Timestamp
  endDate: Timestamp; // Firebase Timestamp
  state: "draft" | "published" | "archived"; // Lifecycle state
  createdAt: Timestamp; // Server timestamp
  updatedAt: Timestamp; // Server timestamp
  createdBy: string; // From context.auth.userId
  publishedAt?: Timestamp; // Set when published
}
```

---

## ğŸ”´ Additional Gaps Found in Schedule/Shift Flow

| #      | Gap                                     | Location                                  | Impact                       |
| ------ | --------------------------------------- | ----------------------------------------- | ---------------------------- |
| **6**  | GET /schedules/\[id] returns mock data  | `schedules/[id]/route.ts`                 | No real schedule fetch       |
| **7**  | PATCH/DELETE schedules return mock data | `schedules/[id]/route.ts`                 | Updates don't persist        |
| **8**  | All shift endpoints return mock data    | `shifts/route.ts`, `shifts/[id]/route.ts` | No real shift persistence    |
| **9**  | Positions return mock data              | `positions/route.ts`                      | No real position persistence |
| **10** | Publish doesn't update schedule state   | `publish/route.ts`                        | Schedule stays "draft"       |

---

## ğŸ“‹ DETAILED FIX PLAN

### Phase 1: Onboarding Flow Fixes (Critical - User Cannot Complete Onboarding)

#### Fix 1.1: Wire create-network-org frontend to API

**File**: `apps/web/app/onboarding/create-network-org/page.tsx`

**Current** (line 43-44):

```typescript
// Real implementation would POST to /api/onboarding/create-network-org.
nav.push("/onboarding/block-4");
```

**Change to**:

```typescript
const res = await fetch("/api/onboarding/create-network-org", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    name: form.orgName,
    venueName: form.venueName,
    city: form.city,
    state: form.state,
  }),
});
const data = await res.json();
if (!res.ok) {
  setError(data.error || "Failed to create organization");
  return;
}
// Set org context from response
setOrgId(data.orgId);
setNetworkId(data.networkId);
// Activate network before completing
await fetch("/api/onboarding/activate-network", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ networkId: data.networkId }),
});
nav.push("/onboarding/block-4");
```

**Dependencies**: OnboardingWizardContext needs `setOrgId`, `setNetworkId`

---

#### Fix 1.2: Wire create-network-corporate frontend to API

**File**: `apps/web/app/onboarding/create-network-corporate/page.tsx`

**Current** (line 45-46):

```typescript
// Real implementation would POST to /api/onboarding/create-network-corporate.
nav.push("/onboarding/block-4");
```

**Change**: Same pattern as 1.1 with `create-network-corporate` endpoint.

---

#### Fix 1.3: Wire join page to API

**File**: `apps/web/app/onboarding/join/page.tsx`

**Current** (line 40-41):

```typescript
// Real implementation would POST to /api/onboarding/join-with-token.
nav.push("/onboarding/block-4");
```

**Change**: Call `/api/onboarding/join-with-token` with invite code.

---

#### Fix 1.4: Add POST handler to admin-form API

**File**: `apps/web/app/api/onboarding/admin-form/route.ts`

**Current**: Only has GET handler

**Add**:

```typescript
export const POST = createAuthenticatedEndpoint({
  input: AdminFormSchema, // Need to create in packages/types
  handler: async ({ input, context }) => {
    const formToken = crypto.randomUUID();
    // Optionally persist to Firestore
    return ok({ formToken });
  },
});
```

---

#### Fix 1.5: Set orgId cookie after network creation

**File**: `apps/web/app/api/onboarding/create-network-org/route.ts`

**Add after successful creation**:

```typescript
const response = ok({ orgId, networkId, ... });
response.cookies.set("orgId", orgId, {
  httpOnly: true,
  secure: process.env.NODE_ENV === "production",
  sameSite: "lax",
  path: "/",
  maxAge: 365 * 24 * 60 * 60, // 1 year
});
return response;
```

---

#### Fix 1.6: Add Firestore writes to create-network-org API

**File**: `apps/web/app/api/onboarding/create-network-org/route.ts`

**Current**: Returns mock data

**Change**: Write to:

- `/networks/{networkId}`
- `/organizations/{orgId}`
- `/memberships/{userId}_{orgId}` (owner role)

---

### Phase 2: Schedule/Shift Persistence Fixes

#### Fix 2.1: Add Firestore reads to GET /schedules/\[id]

#### Fix 2.2: Add Firestore writes to PATCH /schedules/\[id]

#### Fix 2.3: Add Firestore deletes to DELETE /schedules/\[id]

#### Fix 2.4: Add Firestore operations to all shift endpoints

#### Fix 2.5: Add Firestore operations to position endpoints

## #### Fix 2.6: Make publish update schedule.state to "published"

### Phase 3: Type System Alignment

#### Fix 3.1: Create AdminFormSchema in packages/types

#### Fix 3.2: Ensure OnboardingWizardContext has all setters

## #### Fix 3.3: Add missing JoinWithTokenSchema

## Execution Order

```text
Phase 1 (Critical Path - Onboarding Broken)
â”œâ”€â”€ 1.4: Add POST to admin-form (enables frontend to get formToken)
â”œâ”€â”€ 1.6: Add Firestore writes to create-network-org (persistence)
â”œâ”€â”€ 1.5: Set orgId cookie (enables proxy.ts gate)
â”œâ”€â”€ 1.1: Wire create-network-org frontend (calls the API)
â”œâ”€â”€ 1.2: Wire create-network-corporate frontend
â”œâ”€â”€ 1.3: Wire join frontend
â””â”€â”€ Test: Complete onboarding end-to-end

Phase 2 (Core Functionality)
â”œâ”€â”€ 2.1-2.3: Schedule CRUD persistence
â”œâ”€â”€ 2.4: Shift CRUD persistence
â”œâ”€â”€ 2.5: Position CRUD persistence
â””â”€â”€ 2.6: Publish state updates

Phase 3 (Type Safety)
â”œâ”€â”€ 3.1-3.3: Schema alignment
â””â”€â”€ Validate: pnpm typecheck
```

---

**Last Updated**: December 17, 2025
