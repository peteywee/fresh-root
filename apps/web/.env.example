# ===================================
# Fresh Schedules - Web App Environment Variables
# ===================================
# Copy this file to .env.local and fill in your values.
# See docs/environment.md for detailed documentation.

# ===================================
# Core Runtime
# ===================================
# Application environment: development | test | production
NODE_ENV=development

# Port for Next.js dev server (default: 3000)
PORT=3000

# ===================================
# Firebase Client Configuration
# ===================================
# These NEXT_PUBLIC_ prefixed variables are exposed to the browser.
# Get these values from your Firebase project settings.

# Firebase API key (public)
NEXT_PUBLIC_FIREBASE_API_KEY=your-api-key-here

# Firebase auth domain (e.g., your-project.firebaseapp.com)
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com

# Firebase project ID
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id

# Firebase storage bucket (e.g., your-project.appspot.com)
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-project.appspot.com

# Firebase app ID (optional but recommended)
NEXT_PUBLIC_FIREBASE_APP_ID=1:000000000000:web:abcdef123456

# ===================================
# Firebase Admin SDK (Server-side)
# ===================================
# Required for server-side Firebase operations (API routes, server actions)

# Firebase project ID (should match NEXT_PUBLIC_FIREBASE_PROJECT_ID)
FIREBASE_PROJECT_ID=your-project-id

# Option 1: Path to service account JSON file
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/serviceAccountKey.json

# Option 2: Service account JSON as string (preferred for cloud deployments)
# GOOGLE_APPLICATION_CREDENTIALS_JSON='{"type":"service_account","project_id":"...","private_key":"..."}'

# ===================================
# Session & Security
# ===================================
# Secret key for session cookies (REQUIRED in production)
# Generate with: openssl rand -base64 32
SESSION_SECRET=your-32-character-or-longer-secret-key-here

# Session cookie max age in milliseconds (default: 604800000 = 7 days)
# SESSION_COOKIE_MAX_AGE=604800000

# ===================================
# CORS & Rate Limiting
# ===================================
# Comma-separated list of allowed CORS origins (REQUIRED in production)
# CORS_ORIGINS=https://yourapp.com,https://www.yourapp.com

# Rate limit window in milliseconds (default: 60000 = 1 minute)
# RATE_LIMIT_WINDOW_MS=60000

# Maximum requests per window (default: 100)
# RATE_LIMIT_MAX=100

# ===================================
# Backup & Cron
# ===================================
# Secret token for backup cron endpoint (REQUIRED for /api/internal/backup)
# Generate with: openssl rand -hex 32
# BACKUP_CRON_TOKEN=your-backup-cron-token-here

# GCS bucket for Firestore backups
# FIRESTORE_BACKUP_BUCKET=gs://your-backup-bucket

# ===================================
# Cache & Storage
# ===================================
# Redis URL for caching (optional but recommended for production)
# REDIS_URL=redis://localhost:6379

# ===================================
# Observability - Sentry
# ===================================
# Sentry DSN for error tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Sentry organization slug (for source maps upload)
# SENTRY_ORG=your-org

# Sentry project slug (for source maps upload)
# SENTRY_PROJECT=your-project

# Sentry auth token (for source maps upload during build)
# SENTRY_AUTH_TOKEN=your-auth-token

# Public Sentry DSN (exposed to client)
# NEXT_PUBLIC_SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ===================================
# Observability - OpenTelemetry
# ===================================
# OTLP traces endpoint (e.g., for Jaeger, Honeycomb, etc.)
# OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://localhost:4318/v1/traces

# OTLP headers (e.g., for API key authentication)
# OTEL_EXPORTER_OTLP_HEADERS=x-api-key=your-api-key

# Service name for distributed tracing
# OTEL_SERVICE_NAME=fresh-schedules-web

# ===================================
# Development & Testing
# ===================================
# Use Firebase emulators (true | false)
NEXT_PUBLIC_USE_EMULATORS=false

# ===================================
# Feature Flags (Client)
# ===================================
# Rollout toggles. Prefer disabling in production until validated.
NEXT_PUBLIC_FEATURE_REAL_AUTH=false
NEXT_PUBLIC_FEATURE_FIRESTORE_WRITES=false
NEXT_PUBLIC_FEATURE_NEW_NAVIGATION=false
NEXT_PUBLIC_FEATURE_PUBLISH_ENABLED=false

# Bypass onboarding guard for development (REMOVE in production)
# BYPASS_ONBOARDING_GUARD=false

# ===================================
# CI/CD
# ===================================
# GitHub token for actions (set in repository secrets)
# GITHUB_TOKEN=ghp_your_token_here

# Cloudflare Pages/Workers deployment is typically configured via CI secrets.
# Example: CLOUDFLARE_API_TOKEN=...

# ===================================
# Example: Development Configuration
# ===================================
# For local development with emulators, you might use:
#
# NODE_ENV=development
# NEXT_PUBLIC_FIREBASE_PROJECT_ID=demo-fresh
# NEXT_PUBLIC_USE_EMULATORS=true
# NEXT_PUBLIC_FEATURE_REAL_AUTH=true
# NEXT_PUBLIC_FEATURE_FIRESTORE_WRITES=true
# SESSION_SECRET=dev-secret-key-at-least-32-chars-long
# BYPASS_ONBOARDING_GUARD=true
