# Tests & Coverage

This directory contains test strategy documentation, coverage analysis, task mapping, and quality gate specifications for Fresh Schedules.

## Overview

- **Purpose**: Define testing strategy, coverage goals, and quality standards for all code
- **Scope**: Unit testing, integration testing, E2E testing, coverage analysis, task coverage mapping
- **Maintenance**: CI/CD automated (`test-coverage.yml`)
- **Quality**: 10/10 coverage enforced (no exceptions)

## Core Areas

### Test Strategy
- TEST_STRATEGY.md - Overall testing approach and frameworks
- TESTING_STANDARD.md - Testing patterns and standards (also in /patterns/)
- QUALITY_GATES.md - Quality gate definitions and enforcement

### Coverage Analysis (Auto-Generated)
- COVERAGE_ANALYSIS.md *(generated by CI/CD)* - Current test coverage breakdown
- TASK_COVERAGE_REPORT.md *(generated by CI/CD)* - Untested code paths and coverage gaps

## Structure

```
tests/
├── README.md                           (this file)
├── TEST_STRATEGY.md                    (testing approach)
├── TESTING_STANDARD.md                 (testing patterns)
├── QUALITY_GATES.md                    (quality definitions)
├── COVERAGE_ANALYSIS.md                (generated - coverage report)
├── TASK_COVERAGE_REPORT.md             (generated - gap analysis)
├── integration/                        (integration tests)
├── intelligence/                       (test intelligence)
└── rules/                              (Firestore rules tests)
```

## Quick Navigation

- **Testing strategy?** Start with [TEST_STRATEGY.md](./TEST_STRATEGY.md)
- **Testing patterns?** See [TESTING_STANDARD.md](./TESTING_STANDARD.md)
- **Quality gates?** Check [QUALITY_GATES.md](./QUALITY_GATES.md)
- **Current coverage?** Review [COVERAGE_ANALYSIS.md](./COVERAGE_ANALYSIS.md) *(auto-updated)*
- **Coverage gaps?** Browse [TASK_COVERAGE_REPORT.md](./TASK_COVERAGE_REPORT.md) *(auto-updated)*

## Test Frameworks

### Unit Testing
- **Framework**: Vitest
- **Location**: `**/*.test.ts`, `**/*.test.tsx`
- **Target**: ≥90% coverage
- **Run**: `pnpm test`

### Integration Testing
- **Framework**: Vitest (with setup)
- **Location**: `tests/integration/`
- **Target**: ≥80% coverage
- **Run**: `pnpm test:integration`

### E2E Testing
- **Framework**: Playwright
- **Location**: `tests/e2e/`
- **Target**: ≥70% coverage
- **Run**: `pnpm test:e2e`

### Rules Testing
- **Framework**: Firebase Rules Testing
- **Location**: `tests/rules/`
- **Target**: ≥90% coverage
- **Run**: `pnpm test:rules`

## Coverage Goals

| Layer | Target | Current | Status |
|-------|--------|---------|--------|
| Unit | ≥90% | `<auto>` | `<auto>` |
| Integration | ≥80% | `<auto>` | `<auto>` |
| E2E | ≥70% | `<auto>` | `<auto>` |
| Rules | ≥90% | `<auto>` | `<auto>` |
| **Overall** | **≥85%** | **`<auto>`** | **`<auto>`** |

## CI/CD Maintenance

This directory is maintained by `.github/workflows/test-coverage.yml`:
- **Triggers**: On push to main, on demand, on PR to main
- **Tasks**:
  * Run full test suite (Vitest unit + integration)
  * Run E2E tests (Playwright)
  * Run Firestore rules tests
  * Generate COVERAGE_ANALYSIS.md
  * Generate TASK_COVERAGE_REPORT.md
  * Update quality scorecard
  * **Block merge if <10/10 coverage**

## Quality Standards

- ✅ 10/10 coverage score required (no exceptions)
- ✅ All tests passing before merge
- ✅ Cross-references validated (0 broken links)
- ✅ Coverage metrics auto-updated
- ✅ Last updated: December 7, 2025

## Getting Started with Tests

1. **Write unit test**:
   ```bash
   pnpm test -- --watch
   ```

2. **Write integration test**:
   ```bash
   pnpm test:integration -- --watch
   ```

3. **Run all tests before PR**:
   ```bash
   pnpm test && pnpm test:integration && pnpm test:e2e
   ```

4. **Check coverage**:
   ```bash
   pnpm test --coverage
   ```

---

**Breadcrumb**: [Home](../) > **Tests** · [State](../state/) · [Patterns](../patterns/)
